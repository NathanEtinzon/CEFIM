{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bienvenue sur la documentation de Nathan Etinzon","text":"<p>Site compilant la documentation faite par Nathan Etinzon dans le cadre de la formation au CEFIM.</p>"},{"location":"AD-CS_Certificat_Apache/","title":"AD-CS Certificat apache","text":""},{"location":"AD-CS_Certificat_Apache/#1ere-etape-generation-du-cle-avec-openssl","title":"1\u00e8re \u00e9tape : G\u00e9n\u00e9ration du cl\u00e9 avec openssl","text":"<p>Cr\u00e9ation de la cl\u00e9</p> <p>cd /etc/ssl/private sudo openssl genrsa -out www.etinzon.cefim.key 2048</p>"},{"location":"AD-CS_Certificat_Apache/#2eme-etape-creation-dun-fichier-de-conf-avec-les-subjectaltname","title":"2\u00e8me \u00e9tape : Cr\u00e9ation d'un fichier de conf avec les subjectAltName","text":"<p>Cr\u00e9ation du fichier de conf avec les SubjectAltName</p> <p>cd /etc/ssl nano www.etinzon.cefim.conf</p> <p>[req] default_bits = 2048 prompt = no default_md = sha256 req_extensions = req_ext distinguished_name = dn [ dn ] C=FR ST=Tours L=CVDL O=IT  OU=Testing Domain emailAddress=admin@www.etinzon.cefim CN = www.etinzon.cefim [ req_ext ] subjectAltName = @alt_names [ alt_names ] DNS.1 = etinzon.cefim DNS.2 = www.etinzon.cefim  </p>"},{"location":"AD-CS_Certificat_Apache/#3eme-etape-creation-du-csr-avec-le-fichier-de-conf","title":"3\u00e8me \u00e9tape : Cr\u00e9ation du csr avec le fichier de conf","text":"<p>On se place \u00e0 l'endroit o\u00f9 est la cl\u00e9, on indique que l'on veut un certificat csr avec comme config le fichier de conf cr\u00e9e auparavant</p> <p>cd /etc/ssl/private  openssl req -new -key www.etinzon.cefim.key -out www.etinzon.cefim.csr -config ../www.etinzon.cefim.conf</p>"},{"location":"AD-CS_Certificat_Apache/#4eme-etape-importer-le-csr-sur-lad-cs","title":"4\u00e8me \u00e9tape : Importer le csr sur l'AD-CS","text":"<p>Partage r\u00e9seau / Winscp / VMtools</p>"},{"location":"AD-CS_Certificat_Apache/#5eme-etape-signer-le-csr-avec-lauthorite-de-certification","title":"5\u00e8me \u00e9tape : Signer le csr avec l'authorit\u00e9 de certification","text":"<p>Se d\u00e9placer dans l'emplacement o\u00f9 a \u00e9t\u00e9 depos\u00e9 le .csr, ensuite lancer une requ\u00eate afin de signer le certificat et obtenir un .cer</p> <p>cd ./desktop certreq -submit -attrib \"CertificateTemplate:WebServer\" www.etinzon.cefim.csr</p> <p></p> <p>Ensuite, donner un nom au fichier. Exemple : www.etinzon.cefim</p> <p></p>"},{"location":"AD-CS_Certificat_Apache/#6eme-etape-importer-le-cer-dans-lapache","title":"6\u00e8me \u00e9tape : Importer le .cer dans l'apache","text":"<p>Partage r\u00e9seau / Winscp / VMtools</p> <p>Deposer le .cer dans /etc/ssl/cert</p> <p></p>"},{"location":"AD-CS_Certificat_Apache/#7eme-etape-configuration-dapache","title":"7\u00e8me \u00e9tape : Configuration d'apache","text":"<p>Mettre le bon path pour chaque certificat</p> <p>cd /etc/apache2/sites-available nano default-ssl.conf</p> <p>SSLCertificateFile  /etc/ssl/certs/www.etinzon.cefim.cer SSLCertificateKeyFile   /etc/ssl/private/www.etinzon.cefim.key</p> <p></p> <p>systemctl restart apache2</p>"},{"location":"AD-CS_Certificat_Apache/#resultat","title":"R\u00e9sultat","text":""},{"location":"AD-CS_Certificat_IIS/","title":"AD-CS Certificat IIS","text":"<p>/!\\ Remplacer les diff\u00e9rentes informations par les votres /!\\</p>"},{"location":"AD-CS_Certificat_IIS/#1ere-etape-generation-de-la-requete-de-certificat","title":"1\u00e8re \u00e9tape : G\u00e9n\u00e9ration de la requ\u00eate de certificat","text":"<p>Sur le serveur IIS</p> <p>Dans la console de gestion de IIS, ouvrir la console Certificat, faire un clic-droit et s\u00e9lectionner Cr\u00e9er une demande de certificat </p> <p>Renseigner les informations suivantes. </p> <p>S\u00e9lectionner le param\u00e9trage ci-dessous. </p> <p>Renseigner le dossier et de nom o\u00f9 se trouvera la requ\u00eate.  </p>"},{"location":"AD-CS_Certificat_IIS/#2eme-etape-recuperation-de-la-requete","title":"2\u00e8me \u00e9tape : R\u00e9cup\u00e9ration de la requ\u00eate","text":"<p>Sur le serveur AD-CS Via Partage r\u00e9seau / Winscp / VMtools</p>"},{"location":"AD-CS_Certificat_IIS/#3eme-etape-creation-du-certificat","title":"3\u00e8me \u00e9tape : Cr\u00e9ation du certificat","text":"<p>Sur le serveur AD-CS</p> <p>Sur PowerShell, entrer les commandes suivantes : certutil -setreg policy\\EditFlags +EDITF_ATTRIBUTESUBJECTALTNAME2 /!\\ R\u00e9demarrer le service sinon les modifications ne seront pas prises en compte /!\\  </p> <p>Ensuite :  certreq -submit -attrib \"CertificateTemplate:webServer\\nSAN:dns=Ton_FQDN&amp;ipaddress=IP_IIS\" Requ\u00eate.txt</p> <p>S\u00e9lectionner l'autorit\u00e9 de certification. </p> <p>Enregistrer le certificat en .cer </p>"},{"location":"AD-CS_Certificat_IIS/#4eme-etape-recuperation-du-certificat","title":"4\u00e8me \u00e9tape : R\u00e9cup\u00e9ration du certificat","text":"<p>Sur le serveur IIS Partage r\u00e9seau / Winscp / VMtools</p>"},{"location":"AD-CS_Certificat_IIS/#5eme-etape-importation-du-certificat","title":"5\u00e8me \u00e9tape : Importation du certificat","text":"<p>Sur le serveur IIS</p> <p>Dans la console de gestion de IIS, ouvrir la console Certificat, faite un clic-droit et s\u00e9lectionner Terminer une demande de certificat. </p> <p>S\u00e9lectionner le certificat. </p>"},{"location":"AD-CS_Certificat_IIS/#6eme-etape-debugage-certificat-fantome","title":"6\u00e8me \u00e9tape : D\u00e9bugage certificat fant\u00f4me","text":"<p>Sur le serveur IIS (Si le certificat disparait d\u00e8s que la console est actualis\u00e9e, suivez les \u00e9tapes suivantes)</p> <p>Dans la console de certificat, dans le magasin H\u00e9bergement Web, rechercher le num\u00e9ro de s\u00e9rie de votre certificat et le copier. </p> <p>Sous PowerShell, entrer la commande suivante : certutil -repairstore webHosting Serial_Number</p> <p>R\u00e9sultat : </p> <p>Rafraichir la console IIS et le certificat devrait r\u00e9appara\u00eetre.</p>"},{"location":"AD-CS_Certificat_IIS/#7eme-etape-liaison-https","title":"7\u00e8me \u00e9tape : Liaison HTTPS","text":"<p>Sur le serveur IIS</p> <p>Dans la console de gestion de IIS, faire un clic-droit sur le VHost et s\u00e9lectionner Modifier les liaisons. </p> <p>Cr\u00e9er la liaison suivante en s\u00e9lectionnant le certificat r\u00e9cemment import\u00e9. </p>"},{"location":"AD-CS_Certificat_IIS/#8eme-etape-redirection-http-https","title":"8\u00e8me \u00e9tape : Redirection HTTP =&gt; HTTPS","text":"<p>Superbe proc\u00e9dure : https://www.ssl.com/how-to/redirect-http-to-https-with-windows-iis-10/</p>"},{"location":"AD-CS_Certificat_IIS/#resultat","title":"R\u00e9sultat","text":""},{"location":"ITIL_Etinzon_Nathan/","title":"D\u00e9ploiement de Rudder","text":""},{"location":"ITIL_Etinzon_Nathan/#contexte","title":"Contexte","text":"<p>Vous \u00eates un administrateur syst\u00e8me dans une entreprise qui souhaite am\u00e9liorer sa gestion des services informatiques en adoptant les principes ITIL. Votre mission consiste \u00e0 configurer et \u00e0 utiliser Rudder pour automatiser la gestion des configurations, renforcer la s\u00e9curit\u00e9, installer des applications et g\u00e9rer les utilisateurs.</p>"},{"location":"ITIL_Etinzon_Nathan/#tache-1-installation-et-configuration-du-serveur-rudder","title":"T\u00e2che 1 : Installation et Configuration du Serveur Rudder","text":"<p>1.1 Installation</p> <p>Installez Rudder Server sur la machine virtuelle serveur d\u00e9di\u00e9e</p> <p>sudo wget --quiet -O /etc/apt/trusted.gpg.d/rudder_apt_key.gpg \"https://repository.rudder.io/apt/rudder_apt_key.gpg\"</p> <p>sudo nano /etc/apt/sources.list.d/rudder.list</p> <p>Ajouter la ligne : deb [trusted=yes] http://repository.rudder.io/apt/8.0/ jammy main</p> <p>sudo apt-get update</p> <p>sudo apt-get install rudder-server</p> <p>sudo apt-get upgrade</p> <p>rudder server create-user -u n.etinzon</p> <p>1.2 Validation</p> <p>Connectez-vous \u00e0 l'interface web de Rudder, v\u00e9rifiez l'\u00e9tat du serveur et assurez-vous qu'il est pr\u00eat \u00e0 communiquer avec les agents.</p> <p></p>"},{"location":"ITIL_Etinzon_Nathan/#tache-2-installation-et-configuration-dun-agent-rudder","title":"T\u00e2che 2 : Installation et Configuration d'un Agent Rudder","text":"<p>2.1 Machine client Linux</p> <p>Installez l'agent Rudder sur la machine cliente Linux, et configurez-la pour qu'elle communique avec le serveur.</p> <p>sudo wget --quiet -O /etc/apt/trusted.gpg.d/rudder_apt_key.gpg \"https://repository.rudder.io/apt/rudder_apt_key.gpg\"</p> <p>sudo nano /etc/apt/sources.list.d/rudder.list</p> <p>Ajouter la ligne : deb http://repository.rudder.io/apt/8.0/ jammy main</p> <p>sudo apt-get install rudder-agent</p> <p>rudder agent policy-server 163.172.163.218</p> <p>sudo rudder agent inventory</p> <p>2.2 Validation</p> <p>Assurez-vous que l'agent apparaisse dans l'interface web de Rudder et soit autoris\u00e9e.</p> <p></p>"},{"location":"ITIL_Etinzon_Nathan/#tache-3-renforcement-des-configurations-systemes","title":"T\u00e2che 3 : Renforcement des Configurations Syst\u00e8mes","text":"<p>3.1 Technique de S\u00e9curit\u00e9</p> <p>Sur les deux machines :</p> <p>Cr\u00e9ation de comptes : S'assurer que les compte,s \"user01\" et \"user02\" sont existants. User01 a un shell en \"bash\", user02 en \"nologin\". Les homes seront dans \"/home/nom_user\"</p> <p>sudo useradd -m -s /usr/bin/bash user01 sudo useradd -m -s /usr/bin/nologin user02</p> <p></p> <p>D\u00e9sactivation des comptes : S'assurer que le compte \"user02\" est d\u00e9sactiv\u00e9.</p> <p>sudo usermod -L user02</p> <p>Restriction des permissions root : user01\" doit avoir le droit d'utiliser sudo, uniquement pour consulter les log dans \"/var/log/syslog\".</p> <p>sudo nano /etc/sudoers Ajouter les lignes :</p> <p>#Allow user1 to view /var/log/syslog user1   ALL=(root) /bin/nano var/log/syslog/*</p> <p>Configuration du Pare-feu : Autoriser uniquement les ports 22 (SSH), 80 (HTTP), 5309 et 443 (HTTPS). Bloquer tous les autres ports.</p> <p>sudo ufw allow 22 sudo ufw allow 80 sudo ufw allow 5309 sudo ufw allow 443 sudo ufw enable</p> <p></p> <p>Mise \u00e0 jour des Packages : Appliquer toutes les mises \u00e0 jour de s\u00e9curit\u00e9 disponibles.</p> <p>sudo apt-get update sudo apt-get upgrade</p> <p>Installation de Packages : Installer \"fail2ban\" et \"apache2\" et s'assurer du d\u00e9marrage des services.</p> <p>sudo apt-get install apache2 sudo apt-get install fail2ban</p> <p></p> <p>D\u00e9ploiement de fichiers : D\u00e9ployer une page web contenant l'IP du serveur.</p> <p></p> <p>Renforcer la configuration SSH, mais sans rester dehors.</p> <p>G\u00e9n\u00e9rer une paire de cl\u00e9 sur la machine locale</p> <p>ssh-keygen cat ~/.ssh/id_rsa.pub Copier le contenu Sur l'h\u00f4te distant, coller la cl\u00e9 dans /home/n.etinzon/.ssh/authorized_keys Passer le param\u00e8tre PasswordAuthentification yes =&gt; PasswordAuthentification no dans /etc/ssh/ssh_config sudo nano /etc/ssh/ssh_config</p> <p></p>"},{"location":"ITIL_Etinzon_Nathan/#tache-4-audit-et-conformite","title":"T\u00e2che 4 : Audit et Conformit\u00e9","text":"<p>4.1 Audit des Configurations</p> <p>Utilisez les fonctionnalit\u00e9s d'audit de Rudder pour v\u00e9rifier la conformit\u00e9 des machines avec les configurations souhait\u00e9es.</p> <p></p> <p>4.2 Rapport de Conformit\u00e9</p> <p>G\u00e9n\u00e9rez un rapport de conformit\u00e9 \u00e0 partir de l'interface web de Rudder et analysez les r\u00e9sultats.</p> <p>Possibilit\u00e9 d'ajouter d'un module pour avoir un pdf.</p>"},{"location":"ITIL_Etinzon_Nathan/#tache-5-resolution-de-problemes-et-scenarios-pratiques","title":"T\u00e2che 5 : R\u00e9solution de Probl\u00e8mes et Sc\u00e9narios Pratiques","text":"<p>5.1 Diagnostic</p> <p>Diagnostiquez et r\u00e9solvez un probl\u00e8me de configuration sur l'une des machines, simul\u00e9 ou r\u00e9el.</p> <p></p> <p>5.2 Sc\u00e9nario Pratique</p> <p>R\u00e9pondez \u00e0 une demande de changement fictive, en modifiant les configurations sur les machines via Rudder.</p> <p></p> <p></p> <p>R\u00e9sultat :</p> <p></p>"},{"location":"ITIL_Etinzon_Nathan/#tache-6-integration-avec-itil-amelioration-continue-et-recommandations","title":"T\u00e2che 6 : Int\u00e9gration avec ITIL, Am\u00e9lioration Continue et Recommandations","text":"<p>6.1 Alignement ITIL, Analyse et Recommandations</p> <p>Documentez comment les actions r\u00e9alis\u00e9es s'alignent avec les processus ITIL, en particulier la Gestion des Services et la Gestion des Configurations. Identifiez les domaines d'am\u00e9lioration et les recommandations dans la mani\u00e8re dont Rudder est utilis\u00e9 et proposez des actions concr\u00e8tes.</p> <p></p>"}]}